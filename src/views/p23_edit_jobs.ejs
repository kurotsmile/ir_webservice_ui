<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Edit Jobs</title>
    <link rel="icon" type="image/x-icon" href="/public/favicon.ico">
    <link href="/public/css/index.css?v=<%= ver %>" rel="stylesheet" />
    <link rel="stylesheet" href="/public/lib/bootstrap/bootstrap.min.css">
    <script src="/public/lib/jquery/jquery-3.6.0.min.js"></script>
    <script src="/public/lib/bootstrap/bootstrap.bundle.min.js"></script>
    <script src="/public/js/app.js?v=<%= ver %>"></script>
</head>

<body class="brown">
 
    <%- include('menu_sidebar') %>

    <div class="p-1 px-md-4 mb-1 box-shadow" id="bar_menu_top">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-12 col-md-8 col-lg-8 col-xl-8">
                    <div class="row">
                        <div class="col-1">
                            &nbsp;
                        </div>
                        <div class="col-11">
                            <a href="jobs"><img id="btn_back_menu_top" src="/public/SVG/Back.svg"/></a>
                            <h2 class="text-white" style="margin-left: -42px;">Edit Jobs</h2>
                            <div class="breadcrumb"  style="margin-left: -42px;"><a class="nav1" href="/jobs">List Jobs</a> <img style="width: 10px;height: 10px;margin: 6px;" src="/public/SVG/ArrowForward.svg"> Edit Jobs</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Full Width -->
    <main>
        <div class="container-fluid">
            <div class="row row-p">
                <div class="col-6">
                    <div class="label-txt">Jobj ID</div>
                </div>
                <div class="col-6">
                    <div class="input-group r border mb-2 mt-2">
                        <span class="input-group-text r-left">&nbsp;</span>
                        <input type="text" placeholder="Enter data" value="<%= jsonData && jsonData.ID ? jsonData.ID : '' %>" class="form-control">
                        <span class="input-group-text r-right"><img src="/public/SVG/Edit2.svg"/></span>
                    </div>
                </div>
            </div>

            <div class="row row-p">
                <div class="col-6">
                    <div class="label-txt">Jobj Name</div>
                </div>
                <div class="col-6">
                    <div class="input-group r border mb-2 mt-2">
                        <span class="input-group-text r-left">&nbsp;</span>
                        <input type="text" placeholder="Enter data" value="<%= jsonData && jsonData.Name ? jsonData.Name : '' %>" class="form-control">
                        <span class="input-group-text r-right"><img src="/public/SVG/Edit2.svg"/></span>
                    </div>
                </div>
            </div>

            <div class="row row-p mt-3 mb-3">
                <div class="col-6">
                    <div class="label-txt">Interlocks</div>
                </div>

                <div class="col-6">
                    <a href="edit_jobs_interlocks?id=<%= jsonData && jsonData.ID ? jsonData.ID : '' %>"><img src="/public/SVG/Right.svg" style="float: right" class="mb-2 mt-3"/></a>
                </div>
            </div>

            <div class="row mt-3 mb-3">
                <div class="col-10">
                    <h3 class="text-white">Add Pset(s)</h3>
                </div>

                <div class="col-2">
                    <a href="add_pset?id=<%= jsonData && jsonData.ID ? jsonData.ID : '' %>" class="btn btn-info text-white btn-rounded f-right mb-2 mt-2 p-2"><img style="width: 25px;height: 25px;margin-right: 6px;" src="/public/SVG/Add.svg"/>Add Pset</a>
                </div>
            </div>
            <table class="table table-lg table-dark table-bordered table-p-list">
                <thead>
                  <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Pset Name</th>
                    <th scope="col">Action</th>
                  </tr>
                </thead>
                <tbody id="all_items"></tbody>
            </table>

        </div>
    </main>
    <script>
        var jsonData = JSON.parse('<%- JSON.stringify(jsonData) %>');

        function item_p(data_p){
            if(data_p.ID=="") return false;
            var html='<tr>';
            html+='<td scope="row"><span>'+(data_p.index+1)+'</span> <a href="/alert_waring" style="display: none;"><img src="/public/SVG/Warning.svg"></a></td>';
            html+='<td>'+data_p.Strategy+'</td>';
            html+='<td>';
                html+='<a href="/edit_pset"><img src="/public/SVG/Trash.svg"></a>';
                html+='<a href="/edit_pset"><img src="/public/SVG/Copy.svg"></a>';
                html+='<a href="/fail_rules?id_job='+jsonData.ID+'"><img src="/public/SVG/Edit.svg"></a>';
                html+='</td>';
            html+='</tr>';
            return $(html);
        }

        $(document).ready(()=>{
            load_list();
        });

        function load_list(){
            $("#all_items").empty();
            let count_item=0;
            $(jsonData.Psets).each(function(index,p){
                if(p.Strategy!=""){
                    p.index=count_item;
                    $("#all_items").append(item_p(p));
                    count_item++;
                }
            });
        }
    </script>
</body>

</html>